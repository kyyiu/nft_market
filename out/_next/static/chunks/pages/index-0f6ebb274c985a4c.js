(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(10661)}])},10661:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s=n(85893),a=n(25675),r=n.n(a),i=n(83078),o=n(34051),u=n.n(o),p=n(67294),d=n(4672),c=n(67225),l=n(54022),f=n(61744);function y(e,t,n,s,a,r,i){try{var o=e[r](i),u=o.value}catch(p){return void n(p)}o.done?t(u):Promise.resolve(u).then(s,a)}function m(e){var t=e.nftAddress,n=e.tokenId,a=e.isVisible,r=e.marketplaceAddress,o=e.onClose,c=(0,l.lm)(),m=(0,p.useState)(0),b=m[0],v=m[1],x=function(){var e,t=(e=u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wait(1);case 2:c({type:"success",message:"listing updated",title:"Listing updated - please refresh (and move blocks)",position:"topR"}),o&&o(),v("0");case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(s,a){var r=e.apply(t,n);function i(e){y(r,s,a,i,o,"next",e)}function o(e){y(r,s,a,i,o,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),g=(0,i.JX)({abi:d,contractAddress:r,functionName:"updateListing",params:{nftAddress:t,tokenId:n,newPrice:f.fi(b||"0")}}).runContractFunction;return(0,s.jsx)(l.u_,{isVisible:a,onCancel:o,onCloseButtonPressed:o,onOk:function(){g({onError:function(e){console.log(e)},onSuccess:x})},children:(0,s.jsx)(l.II,{label:"Update listing price in L1 Currency (ETH)",name:"New listing price",type:"number",onChange:function(e){v(e.target.value)}})})}function b(e,t,n,s,a,r,i){try{var o=e[r](i),u=o.value}catch(p){return void n(p)}o.done?t(u):Promise.resolve(u).then(s,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(s,a){var r=e.apply(t,n);function i(e){b(r,s,a,i,o,"next",e)}function o(e){b(r,s,a,i,o,"throw",e)}i(void 0)}))}}function x(e){var t=e.price,n=e.nftAddress,a=e.tokenId,o=e.marketplaceAddress,y=e.seller,b=(0,i.Nr)(),x=b.isWeb3Enabled,g=b.account,h=(0,p.useState)(""),k=h[0],I=h[1],w=(0,p.useState)(""),A=w[0],N=w[1],j=(0,p.useState)(""),M=j[0],C=j[1],P=(0,p.useState)(!1),E=P[0],_=P[1],O=(0,l.lm)(),F=(0,i.JX)({abi:c,contractAddress:n,functionName:"tokenURI",params:{tokenId:a}}).runContractFunction,L=(0,i.JX)({abi:d,contractAddress:o,functionName:"buyItem",msgValue:t,params:{nftAddress:n,tokenId:a}}).runContractFunction;function S(){return(S=v(u().mark((function e(){var t,n,s,a,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:if(t=e.sent,console.log("The TokenURI is ".concat(t)),!t){e.next=16;break}return n=t.replace("ipfs://","https://ipfs.io/ipfs/"),e.next=8,fetch(n);case 8:return e.next=10,e.sent.json();case 10:s=e.sent,a=s.image,r=a.replace("ipfs://","https://ipfs.io/ipfs/"),I(r),N(s.name),C(s.description);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,p.useEffect)((function(){x&&function(){S.apply(this,arguments)}()}),[x]);var T=y===g||void 0===y,R=T?"you":function(e,t){if(e.length<=t)return e;var n=t-"...".length,s=Math.ceil(n/2),a=Math.floor(n/2);return e.substring(0,s)+"..."+e.substring(e.length-a)}(y||"",15),B=function(){var e=v(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wait(1);case 2:O({type:"success",message:"Item bought!",title:"Item Bought",position:"topR"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:k?(0,s.jsxs)("div",{children:[(0,s.jsx)(m,{isVisible:E,tokenId:a,marketplaceAddress:o,nftAddress:n,onClose:function(){return _(!1)}}),(0,s.jsx)(l.Zb,{title:A,description:M,onClick:function(){T?_(!0):L({onError:function(e){return console.log(e)},onSuccess:B})},children:(0,s.jsx)("div",{className:"p-2",children:(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)("div",{children:["#",a]}),(0,s.jsxs)("div",{className:"italic text-sm",children:["Owned by ",R]}),(0,s.jsx)(r(),{loader:function(){return k},src:k,height:"200",width:"200"}),(0,s.jsxs)("div",{className:"font-bold",children:[f.bM(t,"ether")," ETH"]})]})})})]}):(0,s.jsx)("div",{children:"Loading..."})})})}var g=n(48036);function h(){var e,t,n=(e=['\n    {\n        activeItems(first: 5, where: { buyer: "0x0000000000000000000000000000000000000000" }) {\n            id\n            buyer\n            seller\n            nftAddress\n            tokenId\n            price\n        }\n    }\n'],t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return h=function(){return n},n}var k=(0,n(81621).Ps)(h()),I=n(16991);function w(){var e=(0,i.Nr)(),t=e.chainId,n=e.isWeb3Enabled,a=t?parseInt(t).toString():null,r=t?g[a].NftMarketplace[0]:null,o=(0,I.a)(k),u=o.loading,p=(o.error,o.data);return(0,s.jsxs)("div",{className:"container mx-auto",children:[(0,s.jsx)("h1",{className:"py-4 px-4 font-bold text-2xl",children:"Recently Listed"}),(0,s.jsx)("div",{className:"flex flex-wrap",children:n?u||!p?(0,s.jsx)("div",{children:"Loading..."}):p.activeItems.map((function(e){console.log(e);var t=e.price,n=e.nftAddress,a=e.tokenId,i=e.seller;return(0,s.jsx)(x,{price:t,nftAddress:n,tokenId:a,marketplaceAddress:r,seller:i},"".concat(n).concat(a))})):(0,s.jsx)("div",{children:"Web3 Currently Not Enabled"})})]})}},67225:function(e){"use strict";e.exports=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"event","anonymous":false,"name":"Approval","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"approved","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ApprovalForAll","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"operator","indexed":true},{"type":"bool","name":"approved","indexed":false}]},{"type":"event","anonymous":false,"name":"DogMinted","inputs":[{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"Transfer","inputs":[{"type":"address","name":"from","indexed":true},{"type":"address","name":"to","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"function","name":"TOKEN_URI","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"approve","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"balanceOf","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"owner"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getApproved","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getTokenCounter","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"isApprovedForAll","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"owner"},{"type":"address","name":"operator"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"mintNft","constant":false,"payable":false,"gas":29000000,"inputs":[],"outputs":[]},{"type":"function","name":"name","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"ownerOf","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"},{"type":"bytes","name":"_data"}],"outputs":[]},{"type":"function","name":"setApprovalForAll","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"operator"},{"type":"bool","name":"approved"}],"outputs":[]},{"type":"function","name":"supportsInterface","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"bytes4","name":"interfaceId"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"symbol","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"tokenURI","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"string"}]},{"type":"function","name":"transferFrom","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]}]')},4672:function(e){"use strict";e.exports=JSON.parse('[{"type":"error","name":"AlreadyListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NoProceeds","inputs":[]},{"type":"error","name":"NotApprovedForMarketplace","inputs":[]},{"type":"error","name":"NotListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NotOwner","inputs":[]},{"type":"error","name":"PriceMustBeAboveZero","inputs":[]},{"type":"error","name":"PriceNotMet","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}]},{"type":"event","anonymous":false,"name":"ItemBought","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"event","anonymous":false,"name":"ItemCanceled","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ItemListed","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"function","name":"buyItem","constant":false,"stateMutability":"payable","payable":true,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"cancelListing","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"getListing","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"tuple","components":[{"type":"uint256","name":"price"},{"type":"address","name":"seller"}]}]},{"type":"function","name":"getProceeds","constant":true,"stateMutability":"view","payable":false,"gas":29000000,"inputs":[{"type":"address","name":"seller"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"listItem","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}],"outputs":[]},{"type":"function","name":"updateListing","constant":false,"payable":false,"gas":29000000,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"newPrice"}],"outputs":[]},{"type":"function","name":"withdrawProceeds","constant":false,"payable":false,"gas":29000000,"inputs":[],"outputs":[]}]')},48036:function(e){"use strict";e.exports=JSON.parse('{"31337":{"NftMarketplace":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]},"11155111":{"NftMarketplace":["0x565cCB37C48b7b90624882ac9E24adfbc78c6970"]}}')}},function(e){e.O(0,[456,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);